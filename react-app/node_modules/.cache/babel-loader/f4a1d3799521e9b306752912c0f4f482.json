{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\makin\\\\Documents\\\\GitHub\\\\project\\\\react-app\\\\src\\\\LoginComponent.js\";\nimport React, { useState, useEffect } from 'react';\nimport './login.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nasync function loginUser(userData) {\n  const data = fetch('http://localhost:2400/auth/login', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    credentials: 'include',\n    body: JSON.stringify(userData)\n  }).then(data => data.json());\n  return await data;\n}\n\nfunction logout() {\n  sessionStorage.removeItem('token');\n  window.location.assign(\"/\");\n  fetch('http://localhost:2400/auth/logout', {\n    credentials: 'include',\n    method: 'GET'\n  });\n}\n\nasync function LoginGoogle() {\n  const data = await fetch('http://localhost:2400/auth/google/url', {\n    method: 'GET',\n    credentials: 'include'\n  });\n  return await data.json();\n}\n\n_c = LoginGoogle;\n\nconst LoginGoogleFunc = async e => {\n  e.preventDefault();\n  const response = await LoginGoogle();\n  console.log(response);\n  window.location.assign(response.url);\n};\n\n_c2 = LoginGoogleFunc;\n\nasync function LoginFacebook() {\n  const data = await fetch('http://localhost:2400/auth/facebook/url', {\n    method: 'GET',\n    credentials: 'include'\n  });\n  return await data.json();\n}\n\n_c3 = LoginFacebook;\n\nconst LoginFacebookFunc = async e => {\n  e.preventDefault();\n  const response = await LoginFacebook();\n  console.log(response);\n  window.location.assign(response.url);\n};\n\n_c4 = LoginFacebookFunc;\nconst [email, setEmail] = useState();\nconst [password, setPassword] = useState();\n\nconst handleSubmit = async e => {\n  e.preventDefault();\n  const response = await loginUser({\n    email,\n    password\n  });\n  console.log(response);\n\n  if (response.msg !== 'ok') {\n    errorMessage(response.msg);\n  } else window.location.reload();\n};\n\nconst [auth, setAuth] = useState(\"\");\nuseEffect(() => {\n  const fetchData = async () => {\n    try {\n      const response = await fetch('http://localhost:2400/auth/loggedin', {\n        method: 'GET',\n        credentials: 'include'\n      });\n      const json = await response.json(); // console.log(json);\n\n      setAuth(json);\n    } catch (error) {\n      console.log(\"error\", error);\n    }\n  };\n\n  fetchData();\n}, []);\n\nclass LoginComponent extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Logowanie\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          children: \"Email: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 51\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          id: \"email\",\n          required: true,\n          onChange: e => setEmail(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 95\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"Has\\u0142o: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 54\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"password\",\n          required: true,\n          onChange: e => setPassword(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"Zaloguj\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        id: \"loginError\",\n        children: \"\\xA0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: LoginGoogleFunc,\n          children: \"LogowanieGoogle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 71\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: LoginFacebookFunc,\n          children: \"LogowanieFacebook\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 75\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"LoginGoogle\");\n$RefreshReg$(_c2, \"LoginGoogleFunc\");\n$RefreshReg$(_c3, \"LoginFacebook\");\n$RefreshReg$(_c4, \"LoginFacebookFunc\");","map":{"version":3,"sources":["C:/Users/makin/Documents/GitHub/project/react-app/src/LoginComponent.js"],"names":["React","useState","useEffect","loginUser","userData","data","fetch","method","headers","credentials","body","JSON","stringify","then","json","logout","sessionStorage","removeItem","window","location","assign","LoginGoogle","LoginGoogleFunc","e","preventDefault","response","console","log","url","LoginFacebook","LoginFacebookFunc","email","setEmail","password","setPassword","handleSubmit","msg","errorMessage","reload","auth","setAuth","fetchData","error","LoginComponent","Component","render","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './login.css'\r\n\r\n\r\nasync function loginUser(userData) {\r\n  const data = fetch('http://localhost:2400/auth/login', {\r\n  method: 'POST',\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  },\r\n  credentials: 'include',\r\n  body: JSON.stringify(userData)\r\n}).then(data => data.json())\r\nreturn await data;\r\n}\r\nfunction logout() {\r\n  sessionStorage.removeItem('token');\r\n  window.location.assign(\"/\");\r\n  fetch('http://localhost:2400/auth/logout', {\r\n    credentials: 'include',\r\n    method: 'GET',\r\n  });\r\n}\r\nasync function LoginGoogle() {\r\n  const data = await fetch('http://localhost:2400/auth/google/url', {\r\n  method: 'GET',\r\n  credentials: 'include'\r\n});\r\nreturn await data.json();\r\n}\r\nconst LoginGoogleFunc = async e => {\r\n  e.preventDefault();\r\n  const response = await LoginGoogle();\r\n  console.log(response);\r\n  window.location.assign(response.url);\r\n}\r\nasync function LoginFacebook() {\r\n  const data = await fetch('http://localhost:2400/auth/facebook/url', {\r\n  method: 'GET',\r\n  credentials: 'include'\r\n});\r\nreturn await data.json();\r\n}\r\nconst LoginFacebookFunc = async e => {\r\n  e.preventDefault();\r\n  const response = await LoginFacebook();\r\n  console.log(response);\r\n  window.location.assign(response.url);\r\n}\r\n\r\nconst [email, setEmail] = useState();\r\nconst [password, setPassword] = useState();\r\n\r\nconst handleSubmit = async e => {\r\n  e.preventDefault();\r\n  const response = await loginUser({\r\n    email,\r\n    password\r\n  });\r\n  console.log(response);\r\n  if(response.msg !== 'ok'){\r\n    errorMessage(response.msg);\r\n  }\r\n  else window.location.reload();\r\n}\r\n\r\nconst [auth, setAuth] = useState(\"\");\r\n\r\nuseEffect(() => {\r\n  \r\n  const fetchData = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:2400/auth/loggedin', {\r\n      method: 'GET',\r\n      credentials: 'include'\r\n    });\r\n    const json = await response.json();\r\n    // console.log(json);\r\n    setAuth(json);\r\n  } catch (error) {\r\n    console.log(\"error\", error);\r\n  }\r\n};\r\n\r\nfetchData();\r\n}, []);\r\n\r\nclass LoginComponent extends React.Component{\r\n    render() {\r\n        return(\r\n            <div className=\"login-wrapper\">\r\n            <h1>Logowanie</h1>\r\n            <form onSubmit={handleSubmit}>\r\n            <label htmlFor=\"email\">Email: </label><br />\r\n            <input type=\"email\" id=\"email\" required onChange={e => setEmail(e.target.value)}/><br />\r\n            <label htmlFor=\"password\">Hasło: </label><br />\r\n            <input type=\"password\" id=\"password\" required onChange={e => setPassword(e.target.value)}/>\r\n            <div>\r\n            <button type=\"submit\">Zaloguj</button>\r\n            </div>\r\n            </form>\r\n            <p id=\"loginError\">&nbsp;</p>\r\n            <div>\r\n            <button onClick={LoginGoogleFunc}>LogowanieGoogle</button><br />\r\n            <button onClick={LoginFacebookFunc}>LogowanieFacebook</button><br />\r\n            </div>\r\n            </div>\r\n            )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}